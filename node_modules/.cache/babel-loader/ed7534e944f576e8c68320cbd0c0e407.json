{"ast":null,"code":"var _jsxFileName = \"/home/gustavo/q2/gestao3/capstone-q2-educ-financeira-g4/src/Providers/Activities/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { createContext, useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { showToast } from \"../../Components/Toast/style\";\nimport api from '../../Services/api';\nimport { useUser } from \"../Users\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ActivitiesContext = /*#__PURE__*/createContext({});\nexport const ActivitiesProvider = ({\n  children\n}) => {\n  _s();\n\n  toast.configure();\n  const [childrenArr, setChildrenArr] = useState([]);\n  const [actualActivitieId, setActualActivitieId] = useState(0);\n  const [amountToPay, setAmountToPay] = useState(Number(localStorage.getItem(\"amountToPay\")) || 0);\n  const {\n    userId\n  } = useUser();\n\n  const getYourChildrens = () => {\n    api.get(`users?parentId=${userId}`, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('token')}`\n      }\n    }).then(response => {\n      setChildrenArr([...response.data]);\n    }).catch(err => {\n      console.log('getyourChildrens', err);\n      localStorage.clear();\n    });\n  };\n\n  const updateActivitie = task => {\n    api.patch(`activities/${task.id}`, task, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('token')}`\n      }\n    }).then(() => showToast({\n      type: \"success\",\n      message: \"Atividade concluída com sucesso\"\n    }));\n  };\n\n  const createActivie = task => {\n    task.reward = Number(task.reward);\n    api.post('activities', task, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('token')}`\n      }\n    }).then(() => {\n      showToast({\n        type: \"success\",\n        message: \"Atividade adicionada com sucesso\"\n      });\n    });\n  };\n\n  const getAmountToPay = number => {\n    setAmountToPay();\n  };\n\n  const deleteActivitie = activitie => {\n    api.delete(`activities/${activitie.id}`, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('token')}`\n      }\n    }).then(response => {\n      console.log(response);\n      showToast({\n        type: \"success\",\n        message: \"Pagamento concluído\"\n      });\n    });\n  };\n\n  const changingActualIdActivitie = activitieId => {\n    setActualActivitieId(activitieId);\n  };\n\n  return /*#__PURE__*/_jsxDEV(ActivitiesContext.Provider, {\n    value: {\n      getYourChildrens,\n      userId,\n      childrenArr,\n      updateActivitie,\n      createActivie,\n      changingActualIdActivitie,\n      actualActivitieId,\n      getAmountToPay,\n      amountToPay,\n      deleteActivitie\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ActivitiesProvider, \"cBUIBoxNxYZas7iiU+pAJ5y0jIA=\", false, function () {\n  return [useUser];\n});\n\n_c = ActivitiesProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"ActivitiesProvider\");","map":{"version":3,"sources":["/home/gustavo/q2/gestao3/capstone-q2-educ-financeira-g4/src/Providers/Activities/index.tsx"],"names":["createContext","useState","toast","showToast","api","useUser","ActivitiesContext","ActivitiesProvider","children","configure","childrenArr","setChildrenArr","actualActivitieId","setActualActivitieId","amountToPay","setAmountToPay","Number","localStorage","getItem","userId","getYourChildrens","get","headers","Authorization","then","response","data","catch","err","console","log","clear","updateActivitie","task","patch","id","type","message","createActivie","reward","post","getAmountToPay","number","deleteActivitie","activitie","delete","changingActualIdActivitie","activitieId"],"mappings":"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","sourcesContent":["import { createContext, ReactNode, useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { showToast } from \"../../Components/Toast/style\";\nimport api from '../../Services/api'\nimport { useUser } from \"../Users\";\n\ninterface ActivitiesProviderData{\n    getYourChildrens: ()=> void,\n    userId:string,\n    childrenArr: Children[],\n    updateActivitie: (task:Activities) => void,\n    createActivie: (task:Activities) => void,\n    actualActivitieId:number\n    changingActualIdActivitie: (activitieId:number ) => void,\n    getAmountToPay: (number:number) => void\n    amountToPay: number,\n\n    deleteActivitie: (activitie:Activities) => void\n} \ninterface ActivitiesProviderProps{\n    children:ReactNode\n}\ninterface Children{\n        balance:[],\n        email:string,\n        id:number,\n        parentId:number,\n        password:string,\n        wallet:number,\n        wishlist:[],\n        name:string,\n        type: string\n}\ninterface Activities {\n    childAchivied: boolean,\n    parentAchivied: boolean,\n    frequency: string;\n    name: string;\n    reward: number;\n    userId: number;\n    id: number;\n}\ninterface ChildrenObj {\n    achivied: boolean,\n    childrenId: number,\n    frequency: string,\n    id: number,\n    name: string,\n    reward: 1000,\n    userId: 2\n}\n\n\nexport const ActivitiesContext = createContext<ActivitiesProviderData>({} as ActivitiesProviderData)\n\nexport const ActivitiesProvider = ({ children }:ActivitiesProviderProps) =>{\n    toast.configure()\n    const [ childrenArr, setChildrenArr ] = useState<Children[]>([])\n    const [ actualActivitieId, setActualActivitieId ]  = useState(0) \n    const [amountToPay, setAmountToPay] = useState(\n        Number(localStorage.getItem(\"amountToPay\")) || 0 \n    )\n    const { userId } = useUser()\n    const getYourChildrens = () =>{\n        api\n         .get(`users?parentId=${userId}`,{\n             headers:{\n                 Authorization:`Bearer ${localStorage.getItem('token')}`\n             }\n         })\n          .then((response)=> {\n            setChildrenArr([ ...response.data])\n          })\n           .catch((err)=>{\n               console.log('getyourChildrens', err)\n               localStorage.clear();\n            })\n           \n    }\n    const updateActivitie = (task:Activities) =>{\n        api\n         .patch(`activities/${task.id}`, task, {\n            headers:{\n                Authorization:`Bearer ${localStorage.getItem('token')}`\n            }\n        })\n         .then(()=> showToast({type:\"success\", message:\"Atividade concluída com sucesso\"}))\n         \n    }\n    const createActivie = (task:Activities) =>{\n        task.reward = Number(task.reward)\n        api\n         .post('activities',  task, {\n            headers:{\n                Authorization:`Bearer ${localStorage.getItem('token')}`\n            }\n        })\n         .then(()=>{\n             showToast({type:\"success\", message:\"Atividade adicionada com sucesso\"})\n         })\n    }\n\n    const getAmountToPay = (number:number) => {\n       \n        setAmountToPay()\n    }\n\n    const deleteActivitie = (activitie:Activities) =>{\n        api\n         .delete(`activities/${activitie.id}`,{\n            headers:{\n                Authorization:`Bearer ${localStorage.getItem('token')}`\n            }\n         })\n          .then((response) => {\n            console.log(response)\n            showToast({type:\"success\", message:\"Pagamento concluído\"})\n          })\n    }\n\n    const changingActualIdActivitie = (activitieId:number) =>{\n        setActualActivitieId(activitieId)\n    }\n    \n    return(\n        <ActivitiesContext.Provider value={{getYourChildrens, userId, childrenArr,updateActivitie, createActivie, changingActualIdActivitie, actualActivitieId, getAmountToPay, amountToPay, deleteActivitie}}>\n            { children }\n        </ActivitiesContext.Provider>\n    )\n}"]},"metadata":{},"sourceType":"module"}